{% extends "inventory/base.html" %}
{% load static %}

{% block extra_head %}
    <title>{{ item.name }} - Movimentar Estoque</title>
    <link rel="stylesheet" href="{% static 'inventory/css/move_stock.css' %}">
{% endblock %}

{% block content %}
<div class="stock-container">
    <h1 class="stock-title">Movimentar Estoque</h1>

    <div class="item-card">
        <h2 class="item-name">{{ item.name }}</h2>
        <p class="item-quantity">Estoque atual: <strong>{{ item.quantity }}</strong></p>

          
          
        <p class="selected-type">
            Tipo selecionado: <span id="tipo-span">Nenhum</span>
        </p>
        
      
        <div class="warning-msg">
            <span class="icon">⚠️</span>
            <span>
                Por favor, escolha o tipo de movimentação: 
                <br>
                <u class="entrada">Entrada</u> ou <u class="saida">Saída</u>
            </span>
        </div>
        

            
            <div class="stock-buttons">
            <a href="{% url 'move_stock' item.pk %}?tipo=E" class="btn btn-add">
                &#x2795; Entrada
            </a>
            <a href="{% url 'move_stock' item.pk %}?tipo=S" class="btn btn-remove">
                &#x2796; Saída
            </a>
        </div>

        <form method="POST" class="stock-form">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="btn-confirm">✅ Confirmar</button>
        </form>
    </div>  
</div>



<script>


document.addEventListener("DOMContentLoaded", function() {
    const tipoSpan = document.getElementById("tipo-span");

    // Função para pegar parâmetro da URL
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    const tipo = getQueryParam("tipo");

    if (tipo === "E") {
        tipoSpan.textContent = "Entrada";
        tipoSpan.className = "tipo-entrada";
    } else if (tipo === "S") {
        tipoSpan.textContent = "Saída";
        tipoSpan.className = "tipo-saida";
    } else {
        tipoSpan.textContent = "Nenhum";
    }
});




</script>

{% endblock %}

